<html>
<head>
<LINK href="../../../pamHelpStylesheet.css" type="text/css"
	rel="STYLESHEET">
<title>Ishmael</title>
</head>

<body>

	<h1>Ishmael Energy Sum Detector</h1>
	<h2>Overview of the method</h2>
	<p>In this method, the values in each vertical strip of the
		spectrogram are summed. The sequence of sums, one sum per vertical
		strip, makes up the detection function. Energy summation is a useful
		detection method for scanning sounds to find everything of interest,
		particularly when the target sounds may be unknown or highly variable.
		It can also be used as a first step for a more sophisticated
		multi-step classification system.</p>

	<h2>Adding the module</h2>
	<p>
		From the PAMGuard file menu select <b>Add Modules > Detectors >
			Ishmael energy sum.</b>
	<p>Give a name to the detector, and hit OK.</p>
	<p>
		This detector will require that you also configure a <a
			href="../../../sound_processing/fftManagerHelp/docs/FFTEngine_Overview.html">FFT
			(Spectrogram) Engine</a> as it's input.
	</p>

	<h2>Configure the module</h2>
	<p>
		From the PAMGuard Settings menu select <b>Ishmael energy sum
			Settings ...</b> to open the dialog
	</p>
	<p>
	<center>
		<img src="images/energysumdialog.png">
	</center>
	</p>
	<br>


	<h3>Data source and channels</h3>
	<p>
		Select the FFT data source. You should think carefully about the best
		FFT Length and FFT Hop to use based on the sample rate of your data
		and the type of sound you are trying to detect. <a
			href="../../..//sound_processing/fftManagerHelp/docs/FFTEngine_Configuring.html">See
			here</a> for more information on this important, but often overlooked,
		topic.
	</p>

	<p>
		Select which channels you want to process and how you want them to be
		grouped. If channels are in the same group, it's slightly easier for
		the <a href="../../../localisation/docs/localisation_overview.html">PAMGuard
			localisers</a> to measure time delays between data on the different
		channels, but only if the hydrophones in each group are quite close
		together.
	</p>

	<h3>Energy Sum calculation</h3>
	The Ishmael Energy Sum, detector initially had a static threshold. This
	means that if the overall noise increased, e.g. due to weather or ship
	noise, many more sounds would pass over threshold resulting in more
	false positives. To remedy this, there are two potential options: the
	use of an "energy ratio" or an "adaptive threshold" with additional
	options to smooth the energy sum output and/or use log scales.

	<h4>Use Energy Ratio</h4>
	<p>When enabled the Ishmael detector peak is the ratio of the
		energy sum between two frequency bands. This can help in situations
		when, for example, broadband noise triggers the detector.</p>

	<h4>Use Adaptive Threshold</h4>
	The adaptive threshold tracks background noise, ensuring that the
	threshold is always some number of dB above the background and thus
	significantly minimises false detections. The downside of this is that
	the relative sensitivity of the detector changes with background noise
	(i.e. the detection range changes with noise). The long filter defines
	how noise is tracked - a lower number means a larger averaging window -
	a typical value might be 0.00005. If there is a loud, short sound, then
	the adaptive noise filter will take a long time to decay back to
	normal. If the result reaches Spike Threshold current energy, then
	noise exponentially decays.

	<h4>Use Detector Smoothing</h4>
	<p>Detector smoothing smoothes the energy sum output so that small
		spikes do not trigger the detector - this is useful for longer sounds.
		A typical value might be 0.1.</p>

	<h4>Use Log Scale</h4>
	<p>The energy sum is calculated from a log scale base ten scale -
		in other words the threshold values become units of dB</p>

	<br>
	<br>
	<p CLASS="prevLink">
		<a href="ishmael_overview.html">Previous: Ishmael Overview </a>
	<p CLASS="nextLink">
		<a href="ishmael_speccorrelation.html">Next: Ishmael Spectrogram
			Correlation </a>
	</p>
	<br>
	<br>
</body>
</html>
