<html>
<head>
<LINK href="../../../pamHelpStylesheet.css" type=text/css rel=STYLESHEET>
<title>Designing UDF forms</title>
</head>

<body>

<h1>Designing PAMGuard Logger Forms</h1>
<h2>Creating a Form</h2>

<p>Key to designing Logger forms in PAMGuard is the generation of one or more UDF_ tables in the PAMGuard database.</p>
<p>The easiest way to generate a blank UDF table is to start PAMGuard, ensure that the database and Logger forms modules
have been loaded, then from the Detection menu select "Detection/Logger forms/Create new form ...". A dialog box will then appear asking for the 
name of the form. Enter the name of the form you want to appear on the display (i.e. don't include UDF_ at the beginning)</p>
<p>PAMGuard will then generate a new UDF table in the PAMGuard database prefixed with the characters "UDF_". 
i.e. if you enter a form name "Effort", PAMGuard will create a form UDF_Effort </p>
<p>You should then be able to open the database and view the new UDF_ form which will currently be empty</p>
<p>At this point, nothing will appear on the display. To see the form on the display, go to the PAMGuard Detection menu 
and select "Detection/Logger forms/Regenerate all forms". An empty form should now appear on the display.</p>
<p>If you look again in the database, you will see that a new output data table has been created with the table name you
typed in (i.e. without UDF_). This will currently contain the following columns which are included in all data tables:</p>
<ol>
<li>Id</li>
<li>UTC</li>
<li>UTCMilliseconds</li>
<li>PCLocalTime</li>
<li>PCTime</li>
</ol>
<p>Make sure you now close this table since PAMGuard will need to modify it when you start adding additional controls to the form. </p>




<h2>Adding Controls</h2>
<p>There are two ways of adding controls to the form. The old method is to edit the UDF table directly. This can be quick and efficient
if you know what you are doing and is useful if you have several similar controls since you can copy and modify entire rows in the UDF table. </p>
<p>A much more simple method is to use to the built in form editing functions which can be accessed directly from the logger forms menus: 
Settings/Logger Forms/Edit Forms/[Your form name].</p>
<p>The built in form editor is modifying the same underlying information in the UDF tables in the database so it is normally possible to 
use a combination of direct editing of the UDF tables and the in built form editor.</p>

<h3>Editing the UDF Table</h3>
<p>To add controls to the form, you simply type lines of instructions into the UDF_ table. PAMGuard will interpret these and generate the 
appropriate input fields on the display and output columns in the output database table. </p>
<p>Although there are many different columns in the UDF_ tables, generally only a few of them need to be
filled in for basic functionality with most control types.</p>
<p>Now go back to the UDF_ table in the database and start to add controls. Whenever you want to see these changes on the 
display simply execute the menu command "Detection/Logger forms/Regenerate all forms"</p> 

<h3>Using the Inbuilt Forms Editor</h3>
<p>To access the forms editor, from the PAMGuard menu select Settings/Logger Forms/Edit Forms/[]Your form name] to show the forms
editing dialog:</p>
<center><img alt="" src="./images/formdesign.png"></center>
<br>
<p>Use the buttons to the left of the dialog to add, delete and change the order of controls. When a control is selected in the controls list, it's properties 
will appear in th erigh thad side of the dialog. Enter appropriate values as required for each control type.</p> 
<p>At any point you can preview the form. Pressing OK will cause the dialog to close and the form to be updated on the PAMGuard user interface.</p>  
<p>Select the "Form Properties" tab to change form properties such as colour, alerts, etc.</p>
<p>See below for further informaton on Control and Property types.</p> 

<h3>Control Types</h3>

<p>There are two types of control which can be added to the form: Data controls and Property controls.</p>
<p>Active controls are something that handles data, i.e. will have something to type into on the display and will have an column 
for output data in the output database table. </p>
<p>Property controls don't control data in any way, but affect the appearance or general behaviour of the form.</p>  

<h3>NMEA Input</h3>
<p>All controls can now receive NMEA input, no just NMEACHAR, NMEAFLOAT and NMEAINT. </p>
<p>To set up NMEA input on a control, fill in the three fields of the UDF_ table NMEA_Module, NMEA_String and
NMEA_Position. </p>
<p>NMEA_Moduleshoud be the name of the NMEA module you expect to find data in, e.g. "NMEA Data Collection". If you leave this empty
it will search for data in the first NMEA module it finds. </p>
<p>NMEA_String is the name of the NMEA string containing the data, e.g. "GPRMC".</p>
<p>NMEA_Position is the index of the data item within the NMEA string (0 is the string name, 1 the first data item, etc). </p>
<p>Further details are provided in individual Data Control descriptions below:</p> 

 
<h4>Data Control Types</h4>
<ul>
<li><a href="CHAR.html">CHAR</a> for character data</li>
<li><a href="CHECKBOX.html">CHECKBOX</a> for logical data</li>
<li><a href="COUNTER.html">COUNTER</a> for auto incrementing counters</li>
<li><a href="DOUBLE.html">DOUBLE</a> for double precision data</li>
<li><a href="INTEGER.html">INTEGER</a> for integer data</li>
<li><a href="LOOKUP.html">LOOKUP</a> for drop down lists</li>
<li><a href="LATLONG.html">LATLONG</a> to Lat Long information</li>
<li><a href="NMEACHAR.html">NMEACHAR</a> for NMEA character data</li>
<li><a href="NMEAFLOAT.html">NMEAFLOAT</a> for NMEA floating point data</li>
<li><a href="NMEAINT.html">NMEAINT</a> for NMEA integer data</li>
<li><a href="SHORT.html">SHORT</a> for short integer (16 bit) data</li>
<li><a href="SINGLE.html">SINGLE</a> for single precision floating point data</li>
<li><a href="TIME.html">TIME</a> for time data</li>
<li><a href="TIMESTAMP.html">TIMESTAMP</a> for date and time data</li>
<li>NEWLINE forces the next control to appear at the start of the next line </li>
</ol>

<h4>Property Control Types</h4>
<ul>
<li><a href="AUTOALERT.html">AUTOALERT</a> Issues a warning when the form is due to be filled in</li>
<li><a href="AUTORECORD.html">AUTORECORD</a> Not yet implemented</li>
<li><a href="BEARING.html">BEARING</a> Selects a Data Control which contains bearing information which will be used on the map display </li>
<li><a href="RANGE.html">RANGE</a> Selects a Data Control which contains range information which will be used on the map display</li>
<li><a href="HEADING.html">HEADING</a> Selects a Data Control which contains heading information which will be used on the map display</li>
<li>PLOT Indicates that the data from these forms can be plotted on the 
<a href="../../../mapping/mapHelp/docs/overview.html">PAMGuard map</a> (note that there are also options
with many Data Controls which give finer control over plot options) </li>
<li><a href="NOCLEAR.html">NOCLEAR</a> The clear button will be removed from a form</li>
<li><a href="NOCANCEL.html">NOCANCEL</a> The clear button will be removed from a form</li>
<li><a href="READONTIMER.html">READONTIMER</a> The form will be read automatically and saved on a timer</li>
<li><a href="READONGPS.html">READONGPS</a> The form will be read automatically and saved whenever new GPS data arrive (not yet implemented)</li>
<li><a href="READONNMEA.html">READONMEA</a> The form will be read automatically and saved whenever new NMEA data arrive</li>
<li><a href="SUBTABS.html">SUBTABS</a> Forms will be displayed on sub-tabs (allowing multiple forms of the same type to be open simultaneously)</li>
<li><a href="SYMBOLTYPE.html">SYMBOLTYPE</a> The type of symbol used for plotting on the map  </li>
</ul>


<br>
<p CLASS="prevLink"><a href="loggerFormsOverview.html">Previous: Forms Overview</a></p>
<p CLASS="nextLink"><a href="./oldLoggerForms.html">Next: Using Old Logger 2000 forms</a></p>

<br>
</body>
</html>